<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instagram Automation Tool</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen active">
        <div class="login-container">
            <div class="login-card">
                <div class="logo">
                    <svg width="60" height="60" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                        <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                        <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                    </svg>
                </div>
                <h1>Instagram Auto Post</h1>
                <p class="subtitle">–õ–æ–∫–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ–≤</p>
                
                <form id="login-form">
                    <div class="form-group">
                        <input type="text" id="username" placeholder="–õ–æ–≥–∏–Ω Instagram" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" required>
                    </div>
                    <button type="submit" class="btn btn-primary btn-full">–í–æ–π—Ç–∏</button>
                </form>
                
                <div id="login-error" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="screen">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-brand">
                <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                    <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                    <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                </svg>
                <span>Instagram Auto Post</span>
            </div>
            <div class="nav-menu">
                <a href="#" class="nav-link active" data-page="create-post">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ü–æ—Å—Ç–∞</a>
                <a href="#" class="nav-link" data-page="library">–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</a>
                <a href="#" class="nav-link" data-page="history">–ò—Å—Ç–æ—Ä–∏—è</a>
            </div>
            <div class="nav-user">
                <span id="connection-status" style="margin-right: 10px; font-size: 12px; color: var(--success);">‚óè –ü–æ–¥–∫–ª—é—á–µ–Ω–æ</span>
                <span id="username-display"></span>
                <button id="logout-btn" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
            </div>
        </nav>

        <!-- Page: Create Post (Unified) -->
        <div id="page-create-post" class="page active">
            <div class="container">
                <h2>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ü–æ—Å—Ç–∞</h2>
                
                <!-- Main Input -->
                <div class="card">
                    <div class="form-group">
                        <label>–û —á–µ–º –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–æ—Å—Ç?</label>
                        <textarea id="post-topic" rows="3" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –≤ –≥–æ—Ä—ã, –∫—Ä–∞—Å–∏–≤—ã–π –∑–∞–∫–∞—Ç, –∑–¥–æ—Ä–æ–≤—ã–π –∑–∞–≤—Ç—Ä–∞–∫..."></textarea>
                    </div>
                    
                    <!-- Media Type Selection -->
                    <div class="form-group" style="margin-bottom: 20px;">
                        <label style="font-weight: bold; font-size: 16px;">–ß—Ç–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –ø–æ—Å—Ç? (–º–∏–Ω–∏–º—É–º 1)</label>
                        <div style="display: flex; gap: 20px; margin-top: 10px;">
                            <label style="cursor: pointer;">
                                <input type="checkbox" id="include-photo" checked>
                                <span style="margin-left: 5px;">üì∏ –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ</span>
                            </label>
                            <label style="cursor: pointer;">
                                <input type="checkbox" id="include-video">
                                <span style="margin-left: 5px;">üé¨ –î–æ–±–∞–≤–∏—Ç—å –≤–∏–¥–µ–æ</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Settings Sections -->
                    <div class="post-settings-container">
                        <!-- Text Settings -->
                        <div class="settings-section">
                            <h3>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–µ–∫—Å—Ç–∞</h3>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label>–†–∞–∑–º–µ—Ä –ø–æ—Å—Ç–∞</label>
                                    <select id="create-post-size">
                                        <option value="short">–ö–æ—Ä–æ—Ç–∫–æ (2-4 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è)</option>
                                        <option value="medium" selected>–°—Ä–µ–¥–Ω–∏–π (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Å—Ç)</option>
                                        <option value="long">–î–ª–∏–Ω–Ω—ã–π (—Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π —Ç–µ–∫—Å—Ç)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>
                                        <input type="checkbox" id="create-add-hashtags">
                                        –î–æ–±–∞–≤–∏—Ç—å —Ö–µ—à—Ç–µ–≥–∏
                                    </label>
                                </div>
                                <div class="form-group">
                                    <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ö–µ—à—Ç–µ–≥–æ–≤</label>
                                    <input type="number" id="create-hashtag-count" value="5" min="1" max="30">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Photo Settings -->
                        <div class="settings-section" id="photo-settings-section">
                            <h3>üì∏ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–æ—Ç–æ</h3>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="auto-prompt-photo" checked>
                                    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç (AI —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ–º–ø—Ç –ø–æ —Ç–µ–º–µ)
                                </label>
                            </div>
                            <div id="manual-prompt-photo-container" class="form-group" style="display: none;">
                                <label>–ü—Ä–æ–º–ø—Ç –¥–ª—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)</label>
                                <textarea id="manual-photo-prompt" rows="2" placeholder="beautiful sunset over mountains, vibrant colors"></textarea>
                            </div>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label>–†–∞–∑–º–µ—Ä –¥–ª—è Instagram</label>
                                    <select id="create-photo-preset" onchange="updateCreatePhotoSize()">
                                        <option value="square">–ö–≤–∞–¥—Ä–∞—Ç (1:1) - –ø–æ—Å—Ç</option>
                                        <option value="portrait">–ü–æ—Ä—Ç—Ä–µ—Ç (4:5) - –ø–æ—Å—Ç</option>
                                        <option value="story">–°—Ç–æ—Ä–∏—Å (9:16)</option>
                                        <option value="landscape">–ü–µ–π–∑–∞–∂ (16:9)</option>
                                        <option value="custom">–°–≤–æ–π —Ä–∞–∑–º–µ—Ä</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>–®–∏—Ä–∏–Ω–∞</label>
                                    <select id="create-photo-width">
                                        <option value="512">512px</option>
                                        <option value="768">768px</option>
                                        <option value="1024" selected>1024px</option>
                                        <option value="1280">1280px</option>
                                        <option value="1920">1920px</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>–í—ã—Å–æ—Ç–∞</label>
                                    <select id="create-photo-height">
                                        <option value="512">512px</option>
                                        <option value="768">768px</option>
                                        <option value="1024" selected>1024px</option>
                                        <option value="1280">1280px</option>
                                        <option value="1920">1920px</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>–ú–æ–¥–µ–ª—å</label>
                                    <select id="create-photo-model">
                                        <option value="flux">Flux (—É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è)</option>
                                        <option value="flux-realism">Flux Realism (—Ä–µ–∞–ª–∏–∑–º)</option>
                                        <option value="flux-anime">Flux Anime (–∞–Ω–∏–º–µ)</option>
                                        <option value="flux-3d">Flux 3D (3D —Å—Ç–∏–ª—å)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Seed (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è)</label>
                                    <input type="number" id="create-photo-seed" placeholder="–°–ª—É—á–∞–π–Ω—ã–π">
                                </div>
                            </div>
                        </div>
                        
                        <!-- Video Settings -->
                        <div class="settings-section" id="video-settings-section" style="display: none;">
                            <h3>üé¨ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∏–¥–µ–æ</h3>
                            <div class="form-group">
                                <label>
                                    <input type="checkbox" id="auto-prompt-video" checked>
                                    –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–º–ø—Ç (AI —Å–æ–∑–¥–∞—Å—Ç –ø—Ä–æ–º–ø—Ç –ø–æ —Ç–µ–º–µ)
                                </label>
                            </div>
                            <div id="manual-prompt-video-container" class="form-group" style="display: none;">
                                <label>–ü—Ä–æ–º–ø—Ç –¥–ª—è –≤–∏–¥–µ–æ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)</label>
                                <textarea id="manual-video-prompt" rows="2" placeholder="cinematic shot of sunset, camera panning slowly"></textarea>
                            </div>
                            <div class="settings-grid">
                                <div class="form-group">
                                    <label>–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω</label>
                                    <select id="create-video-ratio">
                                        <option value="1280:720">16:9 (–ü–µ–π–∑–∞–∂)</option>
                                        <option value="720:1280">9:16 (–°—Ç–æ—Ä–∏—Å)</option>
                                        <option value="1024:1024">1:1 (–ö–≤–∞–¥—Ä–∞—Ç)</option>
                                        <option value="1920:1080">16:9 (Full HD)</option>
                                        <option value="1080:1920">9:16 (Full HD —Å—Ç–æ—Ä–∏—Å)</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</label>
                                    <select id="create-video-duration">
                                        <option value="5" selected>5 —Å–µ–∫—É–Ω–¥</option>
                                        <option value="10">10 —Å–µ–∫—É–Ω–¥</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Seed (–¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è)</label>
                                    <input type="number" id="create-video-seed" placeholder="–°–ª—É—á–∞–π–Ω—ã–π">
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <button id="generate-post-btn" class="btn btn-primary btn-large">üöÄ –°–æ–∑–¥–∞—Ç—å –ü–æ—Å—Ç</button>
                    <div id="create-post-status" class="status-message"></div>
                </div>
                
                <!-- Preview Section -->
                <div id="post-preview-section" class="preview-section" style="display: none;">
                    <div class="card">
                        <div class="preview-header">
                            <h3>üì± –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å—Ç–∞</h3>
                            <button id="preview-settings-toggle" class="btn btn-secondary">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="3"></circle>
                                    <path d="M12 1v6m0 6v6m5.2-13.8l-4.2 4.2m0 6l4.2 4.2M1 12h6m6 0h6m-13.8-5.2l4.2 4.2m0-6l-4.2 4.2"></path>
                                </svg>
                                –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                            </button>
                        </div>
                        
                        <!-- Preview Settings Panel (Collapsible) -->
                        <div id="preview-settings-panel" class="preview-settings" style="display: none;">
                            <div class="form-group">
                                <label>–¢–µ–∫—Å—Ç –ø–æ—Å—Ç–∞</label>
                                <textarea id="preview-caption" rows="8"></textarea>
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 8px;">
                                    <span id="caption-char-count" style="color: var(--text-secondary); font-size: 14px;">0 / 2200 —Å–∏–º–≤–æ–ª–æ–≤</span>
                                    <button id="regenerate-text-btn" class="btn btn-secondary">
                                        üîÑ –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–µ–∫—Å—Ç
                                    </button>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ–¥–∏–∞ (—Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ)</label>
                                <div id="preview-media-container" class="selected-photos"></div>
                                <div style="display: flex; gap: 10px; margin-top: 10px; flex-wrap: wrap;">
                                    <button id="generate-another-photo-btn" class="btn btn-secondary">
                                        ‚ûï –°–æ–∑–¥–∞—Ç—å –µ—â–µ —Ñ–æ—Ç–æ
                                    </button>
                                    <button id="generate-another-video-btn" class="btn btn-secondary">
                                        ‚ûï –°–æ–∑–¥–∞—Ç—å –µ—â–µ –≤–∏–¥–µ–æ
                                    </button>
                                    <button id="add-from-library-btn" class="btn btn-secondary">
                                        üìö –î–æ–±–∞–≤–∏—Ç—å –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Preview Display -->
                        <div class="post-preview-display">
                            <div class="preview-photos-display" id="preview-photos-display"></div>
                            <div class="preview-caption-display" id="preview-caption-display"></div>
                        </div>
                        
                        <!-- Publish Button -->
                        <button id="publish-final-btn" class="btn btn-primary btn-large">
                            üì§ –û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –ü–æ—Å—Ç
                        </button>
                        <div id="preview-publish-status" class="status-message"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Page: Library -->
        <div id="page-library" class="page">
            <div class="container">
                <h2>–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞</h2>
                <div style="margin-bottom: 20px;">
                    <button class="btn btn-secondary" id="show-photos-btn" onclick="showLibraryPhotos()">üì∏ –§–æ—Ç–æ</button>
                    <button class="btn btn-secondary" id="show-videos-btn" onclick="showLibraryVideos()">üé¨ –í–∏–¥–µ–æ</button>
                </div>
                <div id="library-grid" class="photo-grid"></div>
            </div>
        </div>

        <!-- Page: History -->
        <div id="page-history" class="page">
            <div class="container">
                <h2>–ò—Å—Ç–æ—Ä–∏—è –ø–æ—Å—Ç–æ–≤</h2>
                <div id="history-list" class="history-container"></div>
            </div>
        </div>
    </div>

    <!-- Media Selection Modal -->
    <div id="photo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–í—ã–±–µ—Ä–∏—Ç–µ –º–µ–¥–∏–∞</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <div style="margin-bottom: 15px;">
                    <button class="btn btn-secondary btn-sm" onclick="showModalPhotos()">üì∏ –§–æ—Ç–æ</button>
                    <button class="btn btn-secondary btn-sm" onclick="showModalVideos()">üé¨ –í–∏–¥–µ–æ</button>
                </div>
                <div id="modal-photo-grid" class="photo-grid selectable"></div>
            </div>
            <div class="modal-footer">
                <button id="confirm-selection-btn" class="btn btn-primary">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–±–æ—Ä</button>
            </div>
        </div>
    </div>

    <!-- Photo Detail Modal -->
    <div id="detail-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>–î–µ—Ç–∞–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <img id="detail-image" src="" alt="">
                <div id="detail-prompt" class="detail-info"></div>
                <div id="detail-timestamp" class="detail-info"></div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="confirm-modal">
        <div class="confirm-content">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</h3>
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø–æ—Å—Ç –≤ Instagram?</p>
            <div class="confirm-buttons">
                <button id="confirm-yes" class="btn btn-primary">–î–∞, –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>
                <button id="confirm-no" class="btn btn-secondary">–ù–µ—Ç, –æ—Ç–º–µ–Ω–∏—Ç—å</button>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>


