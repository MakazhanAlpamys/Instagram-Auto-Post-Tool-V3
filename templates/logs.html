{% extends "base.html" %}

{% block title %}–õ–æ–≥–∏ - Instagram Auto Post Tool V3{% endblock %}

{% block content %}
<div class="page-header" style="display: flex; justify-content: space-between; align-items: center;">
    <div>
        <h1 class="page-title">üìã –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</h1>
        <p class="page-subtitle">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π –∏ —Å–æ–±—ã—Ç–∏–π</p>
    </div>
    <button class="btn btn-secondary" onclick="loadLogs()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å</button>
</div>

<div class="card">
    <div id="logsList" style="font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.8; max-height: 600px; overflow-y: auto; background: var(--bg-primary); padding: 16px; border-radius: 8px;"></div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    async function loadLogs() {
        try {
            const data = await apiRequest('/api/logs?limit=200');
            const container = document.getElementById('logsList');
            
            if (data.logs.length === 0) {
                container.innerHTML = '<p style="color: var(--text-secondary);">–ù–µ—Ç –ª–æ–≥–æ–≤</p>';
                return;
            }
            
            container.innerHTML = data.logs.join('');
            container.scrollTop = container.scrollHeight;
            
        } catch (error) {
            showToast('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –ª–æ–≥–æ–≤: ' + error.message, 'error');
        }
    }
    
    loadLogs();
    
    // –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
    setInterval(loadLogs, 10000);
</script>
{% endblock %}
